@import '_base';
@import '_fonts';
@import '_animation';

@display: Ivymode, system-ui;
@text: atto, system-ui;
@black: #171a27;
@mid-grey: #535663;
@light-grey: #b8bbc6;
@wash: #F4F4F6;

// Typography
h1,
.h1,
h2,
.h2,
h3,
.h3,
h4,
.h4 {
  font-family: @display;
  font-weight: normal;
  line-height: 1.25;
}

h1,
.h1 {
  font-size: 4rem;
}
h2,
.h2 {
  font-size: 2rem;
  margin-bottom: 0.25em;
}
h3,
.h3 {
  font-size: 1.5rem;
}
h4,
.h4 {
  font-size: 1.125rem;
}

pre,
code {
  font-family: Menlo, Monaco, 'Lucida Console', 'Liberation Mono',
    'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace;
  font-size: 0.875rem;
}

.h-mega {
  --fluid-type-min-size: 4;
  --fluid-type-max-size: 6;
  --fluid-type-min-screen: 20;
  --fluid-type-max-screen: 88;

  /* We multiply by 1rem to essentially stick a rem unit to a number. */
  font-size: calc(
    (var(--fluid-type-min-size) * 1rem) +
      (var(--fluid-type-max-size) - var(--fluid-type-min-size)) *
      (100vw - (var(--fluid-type-min-screen) * 1rem)) /
      (var(--fluid-type-max-screen) - var(--fluid-type-min-screen))
  );

  line-height: 1;
  margin-bottom: 0.25em;
}

.c-mid-grey {
  color: @mid-grey;
}

.c-black {
  color: @black;
}

a[href^="http"] {
  /* fully valid URL, likely external link */
  &:after {
    --icon-after-icon: '¬';
    content: var(--icon-after-icon);
    padding-left: 0.25em;
  }
 
  &:hover {
    border-bottom: 0.1em solid;
  }
}

// Layout
body {
  display: grid;
  grid-template-rows: [header] auto [content] 1fr;
  min-height: calc(100vh - var(--vh-offset, 0px));

  font-family: @text;
  font-size: 1.125rem;
  line-height: 1.875;

  color: @mid-grey;
  background: #fafafa;
}

main {
  padding: 3.5vmin 7vmin;
}

nav {
  display: flex;
  justify-content: space-between;
  padding: 2rem 7vmin;
}

nav li {
  margin-left: 1rem;
  transition: color 0.8s ease-out;

  @media (min-width: 450px) {
    display: inline-block;
  }
}

nav li a:hover {
  color: @black;
}

nav li .disabled {
  text-decoration: line-through;
  color: @light-grey;
  pointer-events: none;
}

header[role='banner'] {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding-bottom: 2rem;

  & p {
    font-family: @text;
  }
}

.big-list {
  margin-bottom: 7vmin;
}

.big-list_heading {
  font-family: @text;
}

.big-list_item {
  border-bottom: 2px solid @mid-grey;
  padding: 2.25rem 0;

  @media (min-width: 1132px) {
    display: flex;
    align-items: baseline;
    flex-wrap: wrap;
  }
}

.big-list_title {
  margin-right: auto;
  margin-bottom: 0;
}


.big-list_meta {
  color: @light-grey;
  font-family: @text;
  line-height: 1.25;
  margin-bottom: 0;
  @media (min-width: 1132px) {
    margin-left: 2rem;
  }
}

article.project {
  display: grid;
  grid-template-columns:
    [page-start main-start]
    minmax(auto, 43em)
    [main-end]
    1fr
    [page-end];
  margin: 0;
}

article.project header {
  margin-bottom: 4rem;
}

article.project > * {
  grid-column: main-start / main-end;
}

article.project > figure {
  grid-column: main-start / page-end;
  margin: 4rem 0;
}

article.post {
  display: grid;
  grid-template-columns:
    [page-start main-start]
    minmax(auto, 40em)
    [main-end]
    1fr
    [page-end];

  & > * {
    grid-column: main-start / main-end;
  }

  // & > figure,
  // & > pre {
  //   grid-column: left-gutter / right-gutter;
  // }

  & > *:not(h1, h2, h3) {
    margin-bottom: 2em;
  }
}

article.post .post_header {
  margin-bottom: 4rem;

  & h1 {
    color: @black;
  }
}

article.post pre {
  overflow-x: auto;
  // @TODO update background color
  background: @wash;
  padding: 7vmin;
}

.about {
  height: 100%;
  margin-bottom: 2rem;

  @media (min-width: 1024px) {
    display: grid;
    grid-template-columns: [left] 1fr [right] 1fr;
    grid-column-gap: 4rem;
  }
}

.about figure {
  max-height: 100%;
}

.about figure img {
  width: 100%;
  max-height: 100%;
  object-fit: cover;
}

.about_content {
  transition: border 0.8s ease-out, color 0.8s ease-out;
  padding-right: 7vmin;
  margin-bottom: 4rem;

  & p {
    margin-bottom: 2rem;
  }
}